<div id="two-farmoverflow" class="win-content two-window">
    <header class="win-head">
        <h2>FarmOverflow</h2>
        <ul class="list-btn">
            <li><a href="#" class="size-34x34 btn-red icon-26x26-close" ng-click="closeWindow()"></a></li>
        </ul>
    </header>
    <div class="win-main" scrollbar="">
        <div class="tabs tabs-bg">
            <div class="tabs-two-col">
                <div class="tab" ng-click="selectTab(TAB_TYPES.SETTINGS)" ng-class="{'tab-active': selectedTab == TAB_TYPES.SETTINGS}">
                    <div class="tab-inner">
                        <div ng-class="{'box-border-light': selectedTab === TAB_TYPES.SETTINGS}">
                            <a href="#" ng-class="{'btn-icon btn-orange': selectedTab !== TAB_TYPES.SETTINGS}">{{ TAB_TYPES.SETTINGS | i18n:loc.ale:textObjectCommon }}</a>
                        </div>
                    </div>
                </div>
                <div class="tab" ng-click="selectTab(TAB_TYPES.LOGS)" ng-class="{'tab-active': selectedTab == TAB_TYPES.LOGS}">
                    <div class="tab-inner">
                        <div ng-class="{'box-border-light': selectedTab === TAB_TYPES.LOGS}">
                            <a href="#" ng-class="{'btn-icon btn-orange': selectedTab !== TAB_TYPES.LOGS}">{{ TAB_TYPES.LOGS | i18n:loc.ale:textObjectCommon }}</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="box-paper footer">
            <div class="scroll-wrap">
                
                <!-- settings -->

                <div class="settings" ng-show="selectedTab === TAB_TYPES.SETTINGS">
                    <table class="tbl-border-light tbl-content tbl-medium-height">
                        <colgroup>
                            <col>
                            <col width="200px">
                        </colgroup>
                        <tr>
                            <th colspan="2">{{ 'groups_presets' | i18n:loc.ale:textObject }}</th>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'presets' | i18n:loc.ale:textObject }}</span></td>
                            <td><div select="" list="presets" selected="settings[SETTINGS.PRESETS]" drop-down="true"></div></td>
                        </tr>

                        <tr>
                            <td><span class="ff-cell-fix">{{ 'group_ignored' | i18n:loc.ale:textObject }}</span></td>
                            <td><div select="" list="groupsWithDisabled" selected="settings[SETTINGS.GROUP_IGNORE]" drop-down="true"></div></td>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'group_include' | i18n:loc.ale:textObject }}</span></td>
                            <td><div select="" list="groups" selected="settings[SETTINGS.GROUP_INCLUDE]" drop-down="true"></div></td>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'group_only' | i18n:loc.ale:textObject }}</span></td>
                            <td><div select="" list="groups" selected="settings[SETTINGS.GROUP_ONLY]" drop-down="true"></div></td>
                        </tr>
                    </table>

                    <table class="tbl-border-light tbl-content tbl-medium-height">
                        <colgroup>
                            <col>
                            <col width="200px">
                            <col width="60px">
                        </colgroup>
                        <tr>
                            <th colspan="3">{{ 'misc' | i18n:loc.ale:textObject }}</th>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'random_base' | i18n:loc.ale:textObject }}</span></td>
                            <td><div range-slider="" min="0" max="30" value="settings[SETTINGS.RANDOM_BASE]" enabled="true"></div></td>
                            <td class="cell-bottom"><input type="text" class="fit textfield-border text-center" ng-model="settings[SETTINGS.RANDOM_BASE]"></td>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'commands_per_village' | i18n:loc.ale:textObject }}</span></td>
                            <td><div range-slider="" min="0" max="50" value="settings[SETTINGS.COMMANDS_PER_VILLAGE]" enabled="true"></div></td>
                            <td class="cell-bottom"><input type="text" class="fit textfield-border text-center" ng-model="settings[SETTINGS.COMMANDS_PER_VILLAGE]"></td>
                        </tr>
                        <tr>
                            <td colspan="2"><span class="ff-cell-fix">{{ 'priority_targets' | i18n:loc.ale:textObject }}</span></td>
                            <td><div switch-slider="" enabled="true" border="true" value="settings[SETTINGS.PRIORITY_TARGETS]" vertical="false" size="'56x28'"></div></td>
                        </tr>
                        <tr>
                            <td colspan="2"><span class="ff-cell-fix">{{ 'ignore_on_loss' | i18n:loc.ale:textObject }}</span></td>
                            <td><div switch-slider="" enabled="settings[SETTINGS.GROUP_IGNORE].value" border="true" value="settings[SETTINGS.IGNORE_ON_LOSS]" vertical="false" size="'56x28'"></div></td>
                        </tr>
                        <tr>
                            <td colspan="2"><span class="ff-cell-fix">{{ 'ignore_full_storage' | i18n:loc.ale:textObject }}</span></td>
                            <td><div switch-slider="" enabled="true" border="true" value="settings[SETTINGS.IGNORE_FULL_STORAGE]" vertical="false" size="'56x28'"></div></td>
                        </tr>
                    </table>

                    <table class="tbl-border-light tbl-content tbl-medium-height">
                        <colgroup>
                            <col>
                            <col width="200px">
                            <col width="60px">
                        </colgroup>
                        <tr>
                            <th colspan="3">{{ 'step_cycle_header' | i18n:loc.ale:textObject }}</th>
                        </tr>
                        <tr>
                            <td colspan="2"><span class="ff-cell-fix">{{ 'step_cycle' | i18n:loc.ale:textObject }}</span></td>
                            <td><div switch-slider="" enabled="true" border="true" value="settings[SETTINGS.STEP_CYCLE]" vertical="false" size="'56x28'"></div></td>
                        </tr>
                        <tr>
                            <td colspan="2"><span class="ff-cell-fix">{{ 'step_cycle_notifs' | i18n:loc.ale:textObject }}</span></td>
                            <td><div switch-slider="" enabled="settings[SETTINGS.STEP_CYCLE]" border="true" value="settings[SETTINGS.STEP_CYCLE_NOTIFS]" vertical="false" size="'56x28'"></div></td>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'step_cycle_interval' | i18n:loc.ale:textObject }}</span></td>
                            <td><div range-slider="" min="0" max="120" value="settings[SETTINGS.STEP_CYCLE_INTERVAL]" enabled="settings[SETTINGS.STEP_CYCLE]"></div></td>
                            <td class="cell-bottom"><input type="text" class="fit textfield-border text-center" ng-model="settings[SETTINGS.STEP_CYCLE_INTERVAL]" ng-disabled="!settings[SETTINGS.STEP_CYCLE]"></td>
                        </tr>
                    </table>

                    <table class="tbl-border-light tbl-content tbl-medium-height">
                        <colgroup>
                            <col>
                            <col width="200px">
                            <col width="60px">
                        </colgroup>
                        <tr>
                            <th colspan="3">{{ 'target_filters' | i18n:loc.ale:textObject }}</th>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'min_distance' | i18n:loc.ale:textObject }}</span></td>
                            <td><div range-slider="" min="0" max="50" value="settings[SETTINGS.MIN_DISTANCE]" enabled="true"></div></td>
                            <td class="cell-bottom"><input type="text" class="fit textfield-border text-center" ng-model="settings[SETTINGS.MIN_DISTANCE]"></td>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'max_distance' | i18n:loc.ale:textObject }}</span></td>
                            <td><div range-slider="" min="0" max="50" value="settings[SETTINGS.MAX_DISTANCE]" enabled="true"></div></td>
                            <td class="cell-bottom"><input type="text" class="fit textfield-border text-center" ng-model="settings[SETTINGS.MAX_DISTANCE]"></td>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'min_points' | i18n:loc.ale:textObject }}</span></td>
                            <td><div range-slider="" min="0" max="13000" value="settings[SETTINGS.MIN_POINTS]" enabled="true"></div></td>
                            <td class="cell-bottom"><input type="text" class="fit textfield-border text-center" ng-model="settings[SETTINGS.MIN_POINTS]"></td>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'max_points' | i18n:loc.ale:textObject }}</span></td>
                            <td><div range-slider="" min="0" max="13000" value="settings[SETTINGS.MAX_POINTS]" enabled="true"></div></td>
                            <td class="cell-bottom"><input type="text" class="fit textfield-border text-center" ng-model="settings[SETTINGS.MAX_POINTS]"></td>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'max_travel_time' | i18n:loc.ale:textObject }}</span></td>
                            <td><div range-slider="" min="0" max="180" value="settings[SETTINGS.MAX_TRAVEL_TIME]" enabled="true"></div></td>
                            <td class="cell-bottom"><input type="text" class="fit textfield-border text-center" ng-model="settings[SETTINGS.MAX_TRAVEL_TIME]"></td>
                        </tr>
                    </table>

                    <table class="tbl-border-light tbl-content tbl-medium-height">
                        <colgroup>
                            <col>
                            <col width="200px">
                            <col width="60px">
                        </colgroup>
                        <tr>
                            <th colspan="3">{{ TAB_TYPES.LOGS | i18n:loc.ale:textObjectCommon }}</th>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'logs_limit' | i18n:loc.ale:textObject }}</span></td>
                            <td><div range-slider="" min="0" max="1000" value="settings[SETTINGS.LOGS_LIMIT]" enabled="true"></div></td>
                            <td class="cell-bottom"><input type="text" class="fit textfield-border text-center" ng-model="settings[SETTINGS.LOGS_LIMIT]"></td>
                        </tr>
                        <tr>
                            <td colspan="2"><span class="ff-cell-fix">{{ 'event_attack' | i18n:loc.ale:textObject }}</span></td>
                            <td><div switch-slider="" enabled="true" border="true" value="settings[SETTINGS.EVENT_ATTACK]" vertical="false" size="'56x28'"></div></td>
                        </tr>
                        <tr>
                            <td colspan="2"><span class="ff-cell-fix">{{ 'event_village_change' | i18n:loc.ale:textObject }}</span></td>
                            <td><div switch-slider="" enabled="true" border="true" value="settings[SETTINGS.EVENT_VILLAGE_CHANGE]" vertical="false" size="'56x28'"></div></td>
                        </tr>
                        <tr>
                            <td colspan="2"><span class="ff-cell-fix">{{ 'event_priority_add' | i18n:loc.ale:textObject }}</span></td>
                            <td><div switch-slider="" enabled="true" border="true" value="settings[SETTINGS.EVENT_PRIORITY_ADD]" vertical="false" size="'56x28'"></div></td>
                        </tr>
                        <tr>
                            <td colspan="2"><span class="ff-cell-fix">{{ 'event_ignored_village' | i18n:loc.ale:textObject }}</span></td>
                            <td><div switch-slider="" enabled="true" border="true" value="settings[SETTINGS.EVENT_IGNORED_VILLAGE]" vertical="false" size="'56x28'"></div></td>
                        </tr>
                    </table>

                    <table class="tbl-border-light tbl-content tbl-medium-height">
                        <colgroup>
                            <col>
                            <col width="200px">
                        </colgroup>
                        <tr>
                            <th colspan="2">{{ 'others' | i18n:loc.ale:textObjectCommon }}</th>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'remote' | i18n:loc.ale:textObject }}</span></td>
                            <td><input type="text" class="fit textfield-border text-center" ng-model="settings[SETTINGS.REMOTE_ID]"></td>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'hotkey_switch' | i18n:loc.ale:textObject }}</span></td>
                            <td><input type="text" class="fit textfield-border text-center" ng-model="settings[SETTINGS.HOTKEY_SWITCH]"></td>
                        </tr>
                        <tr>
                            <td><span class="ff-cell-fix">{{ 'hotkey_window' | i18n:loc.ale:textObject }}</span></td>
                            <td><input type="text" class="fit textfield-border text-center" ng-model="settings[SETTINGS.HOTKEY_WINDOW]"></td>
                        </tr>
                    </table>
                </div>

                <!-- logs -->

                <div class="logs rich-text" ng-show="selectedTab === TAB_TYPES.LOGS">
                    <table class="status tbl-border-light">
                        <colgroup>
                            <col width="135px">
                            <col width="*">
                        </colgroup>
                        <tbody>
                            <tr>
                                <td>{{ 'status' | i18n:loc.ale:textObjectCommon }}</td>
                                <td>
                                    <span>{{ currentStatus | i18n:loc.ale:textObject }}</span>
                                </td>
                            </tr>
                            <tr>
                                <td>{{ 'selected_village' | i18n:loc.ale:textObject }}</td>
                                <td>
                                    <span ng-show="selectedVillage" class="village-link img-link icon-20x20-village btn btn-orange padded" ng-click="openVillageInfo(selectedVillage.id)">{{ selectedVillage.name }} ({{ selectedVillage.x }}|{{ selectedVillage.y }})</span>
                                    <span ng-show="!selectedVillage">{{ 'none' | i18n:loc.ale:textObjectCommon }}</span>
                                </td>
                            </tr>
                            <tr>
                                <td>{{ 'last_attack' | i18n:loc.ale:textObject }}</td>
                                <td>
                                    <span ng-show="lastAttack !== -1">{{ lastAttack | readableDateFilter:loc.ale:GAME_TIMEZONE:GAME_TIME_OFFSET }}</span>
                                    <span ng-show="lastAttack === -1">{{ 'none' | i18n:loc.ale:textObjectCommon }}</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <h5 class="twx-section">{{ TAB_TYPES.LOGS | i18n:loc.ale:textObjectCommon }}</h5>

                    <div class="page-wrap" pagination="pagination"></div>
                    <p class="text-center" ng-show="!visibleLogs.length">{{ 'no_logs' | i18n:loc.ale:textObject }}</p>
                    <table class="log-list tbl-border-light tbl-striped" ng-show="visibleLogs.length">
                        <colgroup>
                            <col width="180px">
                            <col width="30px">
                            <col>
                        </colgroup>
                        <tr ng-repeat="log in visibleLogs">
                            <td>{{ log.time | readableDateFilter:loc.ale:GAME_TIMEZONE:GAME_TIME_OFFSET }}</td>
                            <td><span class="icon-bg-black icon-26x26-{{ log.icon }}"></span></td>
                            
                            <td ng-if="log.type === LOG_TYPES.ATTACK">
                                <span class="village-link img-link icon-20x20-village btn btn-orange padded" ng-click="openVillageInfo(log.origin.id)" tooltip="" tooltip-content="{{ villagesLabel[log.origin.coords] }}">{{ villagesLabel[log.origin.coords] }}</span>
                                {{ 'attack' | i18n:loc.ale:textObject }}
                                <span class="village-link img-link icon-20x20-village btn btn-orange padded" ng-click="openVillageInfo(log.target.id)" tooltip="" tooltip-content="{{ villagesLabel[log.target.coords] }}">{{ villagesLabel[log.target.coords] }}</span>
                            </td>
                            <td ng-if="log.type === LOG_TYPES.VILLAGE_SWITCH">
                                {{ 'village_switch' | i18n:loc.ale:textObject }}
                                <span class="village-link img-link icon-20x20-village btn btn-orange padded" ng-click="openVillageInfo(log.village.id)" tooltip="" tooltip-content="{{ villagesLabel[log.village.coords] }}">{{ villagesLabel[log.village.coords] }}</span>
                            </td>
                            <td ng-if="log.type === LOG_TYPES.NO_PRESET">
                                {{ 'no_preset' | i18n:loc.ale:textObject }}
                            </td>
                            <td ng-if="log.type === LOG_TYPES.PRIORITY_TARGET">
                                <span class="village-link img-link icon-20x20-village btn btn-orange padded" ng-click="openVillageInfo(log.village.id)" tooltip="" tooltip-content="{{ villagesLabel[log.village.coords] }}">{{ villagesLabel[log.village.coords] }}</span>
                                {{ 'priority_target' | i18n:loc.ale:textObject }}
                            </td>
                            <td ng-if="log.type === LOG_TYPES.IGNORED_VILLAGE">
                                <span class="village-link img-link icon-20x20-village btn btn-orange padded" ng-click="openVillageInfo(log.village.id)" tooltip="" tooltip-content="{{ villagesLabel[log.village.coords] }}">{{ villagesLabel[log.village.coords] }}</span>
                                {{ 'ignored_village' | i18n:loc.ale:textObject }}
                            </td>
                        </tr>
                    </table>
                    <div class="page-wrap" pagination="pagination"></div>
                </div>
            </div>
        </div>
    </div>

    <footer class="win-foot">
        <ul class="list-btn list-center">
            <li ng-show="selectedTab === TAB_TYPES.SETTINGS">
                <a href="#" class="btn-border btn-orange" ng-click="saveSettings()">{{ 'save' | i18n:loc.ale:textObjectCommon }}</a>
            </li>
            <li ng-show="selectedTab === TAB_TYPES.LOGS">
                <a href="#" class="btn-border btn-orange" ng-click="clearLogs()">{{ 'clear_logs' | i18n:loc.ale:textObject }}</a>
            </li>
            <li>
                <a href="#" ng-class="{false:'btn-green', true:'btn-red'}[running]" class="btn-border" ng-click="switchFarm()">
                    <span ng-show="running">{{ 'pause' | i18n:loc.ale:textObjectCommon }}</span>
                    <span ng-show="!running">{{ 'start' | i18n:loc.ale:textObjectCommon }}</span>
                </a>
            </li>
        </ul>
    </footer>
</div>
